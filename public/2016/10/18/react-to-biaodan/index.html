<!DOCTYPE HTML>
<html lang>
<head><meta name="generator" content="Hexo 3.9.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="冷子欲-喜欢折腾的前端er">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <meta name="theme-version" content="1.2.3">
    <meta name="root" content="/blog/">
    <link rel="dns-prefetch" href="http://lengziyu.cn">
    <!--SEO-->

    <meta name="keywords" content="react">


    <meta name="description" content="诸如： &lt;input&gt;、&lt;textarea&gt;、&lt;option&gt; 这样的表单组件不同于其他组件，因为他们可以通过用户交互发生变化。这些组件提供的界面使响应用户交...">



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">

    <!--Title-->


<title>React 笔记之 表单 | 冷子欲-喜欢折腾的前端er</title>


    <link rel="alternate" href="/atom.xml" title="冷子欲-喜欢折腾的前端er" type="application/atom+xml">


    <link rel="icon" href="/favicon.ico">

    



<link rel="stylesheet" href="/blog/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/blog/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/blog/css/style.css?rev=@@hash">




    



    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?6df3e7dd5bb844afb79fcf7c69c0a58f";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>



    

</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header"  style="background-image:url(/blog/./img/bg.jpg)"  >
    <div class="main-header-box">
        <a class="header-avatar" href="/" title='lengziyu'>
            <img src="/blog/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                 <img src="/blog/img/branding.png" alt="Snippet 博客主题" class="img-responsive center-block">
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://lengziyu.cn">冷子欲-喜欢折腾的前端er</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/blog"><i class="fa "></i>首页</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/blog/categories/vue/"><i class="fa "></i>vue</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/blog/archives/"><i class="fa "></i>时间轴</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/blog/about"><i class="fa "></i>关于我</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="React 笔记之 表单">
            
	            React 笔记之 表单
            
        </h1>
        <div class="post-meta">
    
        <span class="categories-meta fa-wrap">
            <i class="fa fa-folder-open-o"></i>
            <a class="category-link" href="/blog/categories/react/">react</a>
        </span>
    

    
        <span class="fa-wrap">
            <i class="fa fa-tags"></i>
            <span class="tags-meta">
                
                    <a class="tag-link" href="/blog/tags/react/">react</a>
                
            </span>
        </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2016/10/18</span>
        </span>
        
    
</div>
            
            
            <p class="fa fa-exclamation-triangle warning">
                本文于<strong>1421</strong>天之前发表，文中内容可能已经过时。
            </p>
        
    </div>
    
    <div class="post-body post-content">
        <p>诸如： <code>&lt;input&gt;</code>、<code>&lt;textarea&gt;</code>、<code>&lt;option&gt;</code> 这样的表单组件不同于其他组件，因为他们可以通过用户交互发生变化。这些组件提供的界面使响应用户交互的表单数据处理更加容易。<br><a id="more"></a></p>
<h2 id="交互属性"><a href="#交互属性" class="headerlink" title="交互属性"></a>交互属性</h2><p>在 HTML 中<code>&lt;textarea&gt;</code>的值通过子节点设置；在 React 中则应该使用 value 代替。<br>表单组件可以通过onChange回调函数来监听组件变化。当用户做出以下交互时,onChange执行并通过浏览器做出响应：</p>
<ul>
<li><code>&lt;input&gt;</code>或 <code>&lt;textarea&gt;</code> 的 <code>value</code> 发生变化时。</li>
<li><code>&lt;input&gt;</code>的 <code>checked</code> 状态改变时。</li>
<li><code>&lt;option&gt;</code> 的 <code>selected</code> 状态改变时。<br>和所有 DOM 事件一样，所有的 HTML 原生组件都支持 onChange 属性，而且可以用来监听冒泡的 change 事件.</li>
</ul>
<div class="tip"><br>对于<code>&lt;input&gt;</code>和<code>&lt;textarea&gt;</code>，onChange应当被用于取代DOM内置的onInput事件处理<br></div>

<h2 id="不可控组件和可控组件"><a href="#不可控组件和可控组件" class="headerlink" title="不可控组件和可控组件"></a>不可控组件和可控组件</h2><p><strong>可控组件</strong><br>设置了 <code>value</code> 的 <code>&lt;input&gt;</code> 是一个受限组件。 对于受限的 <code>&lt;input&gt;</code>，渲染出来的 HTML 元素始终保持 <code>value</code> 属性的值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">render: function() &#123;</span><br><span class="line">    return &lt;input type=&quot;text&quot; value=&quot;Hello!&quot;/&gt;;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<p>上面的代码将渲染出一个值为 Hello! 的 input 元素。用户在渲染出来的元素里输入任何值都不起作用，因为 React 已经赋值为 Hello!。如果想响应更新用户输入的值，就得使用 onChange 事件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">getInitialState: function() &#123;</span><br><span class="line">    return &#123;value: &apos;Hello!&apos;&#125;;</span><br><span class="line"> &#125;,</span><br><span class="line"> handleChange: function(event) &#123;</span><br><span class="line">    this.setState(&#123;value: event.target.value&#125;);</span><br><span class="line"> &#125;,</span><br><span class="line"> render: function() &#123;</span><br><span class="line">    var value = this.state.value;</span><br><span class="line">    return &lt;input type=&quot;text&quot; value=&#123;value&#125; onChange=&#123;this.handleChange&#125; /&gt;;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>Default Value</strong><br>初始值是状态中的value。如果要取数据，可直接使用 <code>var inputValue = this.state.value</code>。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">render: function() &#123;</span><br><span class="line">   return &lt;input type=&quot;text&quot; defaultValue=&#123;this.state.value&#125;/&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><div class="tip"><br>一个可控组件并不保持自己的原始状态；组件的呈现完全基于属性。<br></div><br><strong>实例</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">var Kekong = React.creatClass(&#123;</span><br><span class="line">    getInitialState:function()&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            dada:&apos;shuaige&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    handleChange:function(e)&#123;</span><br><span class="line">        this.setState(&#123;</span><br><span class="line">            dada:e.target.value</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    submitHandler:function(e)&#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">        alert(this.state.dada);</span><br><span class="line">    &#125;,</span><br><span class="line">    render:function()&#123;</span><br><span class="line">        return &lt;form onSubmit=&#123;this.submitHandler&#125;&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; value=&#123;this.state.dada&#125; onChange=&#123;this.handleChange&#125; /&gt;</span><br><span class="line">            &lt;button type=&quot;submit&quot;&gt;speak&lt;/button&gt;</span><br><span class="line">        &lt;/form&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">ReactDOM.render(&lt;Kekong /&gt;,document.body);</span><br></pre></td></tr></table></figure></p>
<p><strong>不可控组件</strong><br>没有设置value(或者设为null) 的<code>&lt;input&gt;</code>组件是一个不可控组件。这样的话，组件中的数据和state中的数据并不对应，可以说，组件的数据不可控。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">render: function() &#123;</span><br><span class="line">    return &lt;input type=&quot;text&quot; /&gt;;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></p>
<p>上面的代码将渲染出一个空值的输入框，用户输入将立即反应到元素上。和受限元素一样，使用 onChange 事件可以监听值的变化。<br><strong>Default Value</strong><br>如果想给组件设置一个非空的初始值，可以使用 defaultValue 属性。 数据在这里并没有存贮在状态中，而是写在input中。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">render: function() &#123;</span><br><span class="line">   return &lt;input type=&quot;text&quot; defaultValue=&quot;Hello!&quot; /&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>如果要拿到input中的value，需先拿到其DOM节点，然后获取其value值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var inputValue = React.findDOMNode(this.refs.input).value</span><br></pre></td></tr></table></figure></p>
<p>上面的代码渲染出来的元素和受限组件一样有一个初始值，但这个值用户可以改变并会反应到界面上。<br>同样，<code>&lt;input type=&quot;checkbox&quot;&gt;</code>和<code>&lt;input type=&quot;radio&quot;&gt;</code>支持defaultChecked属性，<code>&lt;select&gt;</code>支持设置defaultValue。<br><code>defaultValue</code>和<code>defaultChecked</code>属性只能在初始的render函数中使用，如果你要在随后的render函数中更新value值，你需要使用可控组件。</p>
<p><strong>实例</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var UnKekong = React.creatClass(&#123;</span><br><span class="line">    submitHandler:function(e)&#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">        var helloUnke = React.findDOMNode(this.refs.helloUnke).value;</span><br><span class="line">        alert(helloUnke);</span><br><span class="line">    &#125;,</span><br><span class="line">    render:function()&#123;</span><br><span class="line">        return &lt;form onsubmit=&#123;this.submitHandler&#125;&gt;</span><br><span class="line">            &lt;input ref=&quot;helloUnke&quot; type=&quot;text&quot; defaultValue=&quot;Dada shuaige&quot; /&gt;</span><br><span class="line">            &lt;button type=&quot;submit&quot;&gt;speak&lt;/button&gt;</span><br><span class="line">        &lt;/form&gt;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">React.render(&lt;Unkekong /&gt;,document.body);</span><br></pre></td></tr></table></figure></p>
<p><strong>Checkbox和Radio的潜在问题</strong></p>
<p><div class="tip"><br>注意，在试图改变正常处理Checkbox和Radio input时，React用一个click事件来代替change事件。大多数情况下，这种行为与预期相同，除了调用preventDefault时。preventDefault从视觉上阻止浏览器更新input，即使checked被触发。它可以在移除调用preventDefault与用setTimeout来切换checked中起作用。<br></div><br><strong>Why use Controlled Components</strong><br>组件可控的优点：</p>
<ul>
<li>符合React的数据流，单向数据流，从state流向render输出的结果。</li>
<li>数据存贮在state中，便于使用。</li>
<li>便于对数据进行处理</li>
</ul>
<h2 id="表单元素"><a href="#表单元素" class="headerlink" title="表单元素"></a>表单元素</h2><ul>
<li><code>&lt;label htmlFor=&quot;name&quot;&gt;Name&lt;/label&gt;</code></li>
<li>要注意for是js关键字，要写成htmlFor。具体JSX语法在之间笔记中有介绍，传送门：React.js学习笔记之JSX解读。现在多数提示用input的placeholder属性替代。</li>
<li><code>&lt;input type=&quot;&quot; onChange={this.handleChange}/&gt;</code></li>
<li><code>&lt;textarea onChange={this.handleChange}/&gt;</code></li>
<li><code>&lt;select onChange={this.handleChange}&gt;&lt;option&gt;&lt;/option&gt;&lt;/select&gt;</code></li>
</ul>
<p><strong>实例</strong><br><a href="https://github.com/Xiaoxianrou/Blog/tree/master/2016.03/React-Demo/demo3" target="_blank" rel="noopener">这是一个demo传送门</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">var MyForm = React.createClass(&#123;</span><br><span class="line">getInitialState:function()&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        username:&apos;&apos;,</span><br><span class="line">        gender:&apos;man&apos;,</span><br><span class="line">        checked:true</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;,</span><br><span class="line">handleUsernameChange:function(e)&#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">        username:e.target.value</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br><span class="line">handlerGenderChange:function(e)&#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">        gender:e.target.value</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br><span class="line">handleCheckedChange:function(e)&#123;</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">        checked:e.target.checked</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br><span class="line">submitHandler:function (e) &#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    console.log(this.state);</span><br><span class="line">&#125;,</span><br><span class="line">render:function () &#123;</span><br><span class="line">    return &lt;form onSubmit=&#123;this.submitHandler&#125;&gt;</span><br><span class="line">        &lt;label htmlFor=&quot;username&quot;&gt;请输入用户名&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;text&quot; onChange=&#123;this.handleUsernameChange&#125; value=&#123;this.state.username&#125; id=&quot;username&quot;/&gt;</span><br><span class="line">        &lt;br/&gt;</span><br><span class="line">        &lt;select onChange=&#123;this.handlerGenderChange&#125; value=&#123;this.state.gender&#125;&gt;</span><br><span class="line">            &lt;option value=&quot;man&quot;&gt;男&lt;/option&gt;</span><br><span class="line">            &lt;option value=&quot;woman&quot;&gt;女&lt;/option&gt;</span><br><span class="line">        &lt;/select&gt;</span><br><span class="line">        &lt;br/&gt;</span><br><span class="line">        &lt;label htmlFor=&quot;checkbox&quot;&gt;大大是帅哥吗&lt;/label&gt;</span><br><span class="line">        &lt;input type=&quot;checkbox&quot; value=&quot;大大是帅哥&quot; checked=&#123;this.state.checked&#125; onChange=&#123;this.handleCheckedChange&#125; id=&quot;checkbox&quot;/&gt;</span><br><span class="line">        &lt;button type=&quot;submit&quot;&gt;提交&lt;/button&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">ReactDOM.render(&lt;MyForm /&gt;,document.getElementById(&apos;reactDemo&apos;));</span><br></pre></td></tr></table></figure></p>
<h2 id="事件处理函数"><a href="#事件处理函数" class="headerlink" title="事件处理函数"></a>事件处理函数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">onChange=&#123;this.handleChange&#125;</span><br></pre></td></tr></table></figure>
<p>若有多个元素要运用事件处理函数，常规的方法是编写多个onChange事件。这么写的话会导致代码维护比较困难并且也非常冗余。更好的做法是把事件处理函数编写为一个。可以采用bind复用和name复用这两种方法。</p>
<p><strong>bind复用</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">handleChange:function(name,event)&#123;</span><br><span class="line">    ......</span><br><span class="line">&#125;</span><br><span class="line">onChagne=&#123;this.handleChange.bind(this,&apos;input&apos;)&#125;</span><br></pre></td></tr></table></figure></p>
<p>书写简单，但需要对bind()机制熟悉，性能相对要好。</p>
<p><strong>实例</strong><br><a href="https://github.com/Xiaoxianrou/Blog/tree/master/2016.03/React-Demo/demo3" target="_blank" rel="noopener">这是一个demo传送门</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">var MyForm = React.createClass(&#123;</span><br><span class="line">    getInitialState:function()&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            username:&apos;&apos;,</span><br><span class="line">            gender:&apos;man&apos;,</span><br><span class="line">            checked:true</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    handleChange:function(name,event)&#123;</span><br><span class="line">        var newState=&#123;&#125;;</span><br><span class="line">        newState[name]=name==&quot;checked&quot;?event.target.checked:event.target.value;</span><br><span class="line">        this.setState(newState);</span><br><span class="line">    &#125;,</span><br><span class="line">    submitHandler:function (e) &#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">        console.log(this.state);</span><br><span class="line">    &#125;,</span><br><span class="line">    render:function () &#123;</span><br><span class="line">        return &lt;form onSubmit=&#123;this.submitHandler&#125;&gt;</span><br><span class="line">            &lt;label htmlFor=&quot;username&quot;&gt;请输入用户名&lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; onChange=&#123;this.handleChange.bind(this,&quot;username&quot;)&#125; value=&#123;this.state.username&#125; id=&quot;username&quot;/&gt;</span><br><span class="line">            &lt;br/&gt;</span><br><span class="line">            &lt;select onChange=&#123;this.handleChange.bind(this,&quot;gender&quot;)&#125; value=&#123;this.state.gender&#125;&gt;</span><br><span class="line">                &lt;option value=&quot;man&quot;&gt;男&lt;/option&gt;</span><br><span class="line">                &lt;option value=&quot;woman&quot;&gt;女&lt;/option&gt;</span><br><span class="line">            &lt;/select&gt;</span><br><span class="line">            &lt;br/&gt;</span><br><span class="line">            &lt;label htmlFor=&quot;checkbox&quot;&gt;大大是帅哥吗&lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;checkbox&quot; value=&quot;大大是帅哥&quot; checked=&#123;this.state.checked&#125; onChange=&#123;this.handleChange.bind(this,&quot;checked&quot;)&#125; id=&quot;checkbox&quot;/&gt;</span><br><span class="line">            &lt;button type=&quot;submit&quot;&gt;提交&lt;/button&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">ReactDOM.render(&lt;MyForm /&gt;,document.getElementById(&apos;reactDemo&apos;));</span><br></pre></td></tr></table></figure></p>
<p><strong>name复用</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">handleChange:function(event)&#123;</span><br><span class="line">    var name = event.target.name</span><br><span class="line">&#125;</span><br><span class="line">onChange=&#123;this.handleChange&#125;</span><br></pre></td></tr></table></figure></p>
<p>相比Bind写法会少一些参数，在函数中需要读取表单的name值，需要添加name属性。</p>
<p><strong>实例</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">var MyForm = React.createClass(&#123;</span><br><span class="line">    getInitialState:function()&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            username:&apos;&apos;,</span><br><span class="line">            gender:&apos;man&apos;,</span><br><span class="line">            checked:true</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    handleChange:function(event)&#123;</span><br><span class="line">        var newState=&#123;&#125;;</span><br><span class="line">        newState[event.target.name]=event.target.name==&quot;checked&quot;?event.target.checked:event.target.value;</span><br><span class="line">        this.setState(newState);</span><br><span class="line">    &#125;,</span><br><span class="line">    submitHandler:function (e) &#123;</span><br><span class="line">        e.preventDefault();</span><br><span class="line">        console.log(this.state);</span><br><span class="line">    &#125;,</span><br><span class="line">    render:function () &#123;</span><br><span class="line">        return &lt;form onSubmit=&#123;this.submitHandler&#125;&gt;</span><br><span class="line">            &lt;label htmlFor=&quot;username&quot;&gt;请输入用户名&lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;text&quot; name=&quot;username&quot; onChange=&#123;this.handleChange&#125; value=&#123;this.state.username&#125; id=&quot;username&quot;/&gt;</span><br><span class="line">            &lt;br/&gt;</span><br><span class="line">            &lt;select name=&quot;gender&quot; onChange=&#123;this.handleChange&#125; value=&#123;this.state.gender&#125;&gt;</span><br><span class="line">                &lt;option value=&quot;man&quot;&gt;男&lt;/option&gt;</span><br><span class="line">                &lt;option value=&quot;woman&quot;&gt;女&lt;/option&gt;</span><br><span class="line">            &lt;/select&gt;</span><br><span class="line">            &lt;br/&gt;</span><br><span class="line">            &lt;label htmlFor=&quot;checkbox&quot;&gt;大大是帅哥吗&lt;/label&gt;</span><br><span class="line">            &lt;input type=&quot;checkbox&quot; value=&quot;大大是帅哥&quot; checked=&#123;this.state.checked&#125; onChange=&#123;this.handleChange&#125; name=&quot;checked&quot; id=&quot;checkbox&quot;/&gt;</span><br><span class="line">            &lt;button type=&quot;submit&quot;&gt;提交&lt;/button&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">ReactDOM.render(&lt;MyForm /&gt;,document.getElementById(&apos;reactDemo&apos;));</span><br></pre></td></tr></table></figure></p>
<h2 id="自定义表单组件"><a href="#自定义表单组件" class="headerlink" title="自定义表单组件"></a>自定义表单组件</h2><p>自定义表单组件能让我们更好的使用组件，让我们更好的开发网页。</p>
<p><strong>why 自定义表单组件？</strong><br>自定义表单组件的原因：</p>
<ul>
<li>内因：表单本身具备特殊性：样式统一、信息内聚、行为固定</li>
<li>外因：本质上是组件的嵌套，组织和管理组件的一种方式</li>
</ul>

    </div>
    
    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href="http://lengziyu.cn" target="_blank">lengziyu</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/blog/2016/10/20/react-use-dmo-refs/" class="pre-post btn btn-default" title='React 操作真实 DOM'>
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">React 操作真实 DOM</span>
        </a>
    
    
        <a href="/blog/2016/10/17/ES6-to-let-and-const/" class="next-post btn btn-default" title='ES6笔记之 let 和 const'>
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">ES6笔记之 let 和 const</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
    <div id="vcomments" class="valine"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="/blog/assets/valine.min.js"></script>

    <script>
        new Valine({
            av: AV,
            el: '#vcomments',
            appId: 'n5eMVNdQYjjvTrgaAJ5sa6I4-gzGzoHsz',
            appKey: 'Xunr2giiNkqKLYz2wLmXcgOA',
            placeholder: '说点什么吧',
            notify: false,
            verify: true,
            avatar: 'mm',
            meta: 'nick,mail'.split(','),
            pageSize: '10',
            path: window.location.pathname,
            lang: ''.toLowerCase()
        })
    </script>


    </div>





                </main>

                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#交互属性"><span class="toc-text">交互属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#不可控组件和可控组件"><span class="toc-text">不可控组件和可控组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#表单元素"><span class="toc-text">表单元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#事件处理函数"><span class="toc-text">事件处理函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#自定义表单组件"><span class="toc-text">自定义表单组件</span></a></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
        </div>
    </div>
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
</a>




    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
</div>

            </div>
            <div class="col-sm-12">
                <span>Copyright &copy; 2019
                  <span>
                    <a target="_blank" href="http://www.beian.miit.gov.cn/">粤ICP备15104739号-3</a>
                  </span>
                </span>
            </div>
        </div>
    </div>
</div>







<script src="/blog/js/app.js?rev=@@hash"></script>

</body>
</html>
